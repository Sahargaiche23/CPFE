<app-main-layout>
  <div class="fade-in max-w-4xl mx-auto">
    <!-- Header -->
    <div class="mb-8">
      <a routerLink="/cooperant" class="text-cnss-primary hover:underline inline-flex items-center mb-4">
        <span class="material-icons mr-1">arrow_back</span>
        {{ i18n.t('forms.backToList') }}
      </a>
      <h1 class="text-3xl font-bold text-cnss-dark">{{ i18n.t('forms.newEmployer') }}</h1>
      <p class="text-gray-600 mt-2">{{ i18n.t('forms.newEmployerDesc') }}</p>
    </div>

    <!-- Form -->
    <form [formGroup]="employerForm" (ngSubmit)="onSubmit()" class="space-y-6">
      
      <!-- RÃ©gime Selection -->
      <div class="card">
        <h2 class="text-xl font-bold text-cnss-dark mb-6 flex items-center">
          <span class="material-icons mr-2 text-cnss-primary">category</span>
          {{ i18n.t('forms.regimeType') }}
        </h2>
        <div class="grid grid-cols-2 gap-4">
          <label class="relative cursor-pointer">
            <input type="radio" formControlName="regime" value="500" class="sr-only peer">
            <div class="p-6 border-2 border-gray-300 rounded-lg peer-checked:border-cnss-primary peer-checked:bg-blue-50 transition-all">
              <div class="flex items-center justify-between mb-2">
                <span class="text-lg font-bold">{{ i18n.t('forms.regime500') }}</span>
                <span class="material-icons text-blue-600">apartment</span>
              </div>
              <p class="text-sm text-gray-600">{{ i18n.t('forms.regime500Desc') }}</p>
            </div>
          </label>
          
          <label class="relative cursor-pointer">
            <input type="radio" formControlName="regime" value="510" class="sr-only peer">
            <div class="p-6 border-2 border-gray-300 rounded-lg peer-checked:border-cnss-primary peer-checked:bg-green-50 transition-all">
              <div class="flex items-center justify-between mb-2">
                <span class="text-lg font-bold">{{ i18n.t('forms.regime510') }}</span>
                <span class="material-icons text-green-600">domain</span>
              </div>
              <p class="text-sm text-gray-600">{{ i18n.t('forms.regime510Desc') }}</p>
            </div>
          </label>
        </div>
      </div>

      <!-- Company Information -->
      <div class="card">
        <h2 class="text-xl font-bold text-cnss-dark mb-6 flex items-center">
          <span class="material-icons mr-2 text-cnss-primary">business</span>
          {{ i18n.t('forms.companyInfo') }}
        </h2>
        
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
          <div class="md:col-span-2">
            <label class="block text-sm font-semibold text-gray-700 mb-2">
              {{ i18n.t('forms.legalName') }} <span class="text-red-500">*</span>
            </label>
            <input type="text" formControlName="raisonSociale" 
                   class="form-field">
          </div>

          <div class="md:col-span-2">
            <label class="block text-sm font-semibold text-gray-700 mb-2">
              {{ i18n.t('forms.tradeName') }} <span class="text-red-500">*</span>
            </label>
            <input type="text" formControlName="nomCommercial" 
                   class="form-field">
          </div>

          <div>
            <label class="block text-sm font-semibold text-gray-700 mb-2">
              {{ i18n.t('forms.country') }} <span class="text-red-500">*</span>
            </label>
            <select formControlName="pays" class="form-field">
              <option value="">{{ i18n.t('forms.selectOption') }}</option>
              <option value="Tunisie">Tunisie</option>
              <option value="France">France</option>
              <option value="Allemagne">Allemagne</option>
              <option value="Italie">Italie</option>
              <option value="Belgique">Belgique</option>
              <option value="Suisse">Suisse</option>
            </select>
          </div>

          <div>
            <label class="block text-sm font-semibold text-gray-700 mb-2">
              {{ i18n.t('forms.legalForm') }}
            </label>
            <select formControlName="legalForm" class="form-field">
              <option value="">{{ i18n.t('forms.selectOption') }}</option>
              <option value="SARL">SARL</option>
              <option value="SA">SA</option>
              <option value="SAS">SAS</option>
              <option value="SUARL">SUARL</option>
            </select>
          </div>
        </div>
      </div>

      <!-- Contact Information -->
      <div class="card">
        <h2 class="text-xl font-bold text-cnss-dark mb-6 flex items-center">
          <span class="material-icons mr-2 text-cnss-primary">contact_mail</span>
          {{ i18n.t('forms.coordinates') }}
        </h2>
        
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
          <div class="md:col-span-2">
            <label class="block text-sm font-semibold text-gray-700 mb-2">
              {{ i18n.t('forms.address') }} <span class="text-red-500">*</span>
            </label>
            <textarea formControlName="adresse" rows="3"
                      class="form-field"></textarea>
          </div>

          <div>
            <label class="block text-sm font-semibold text-gray-700 mb-2">
              {{ i18n.t('forms.city') }}
            </label>
            <input type="text" formControlName="city" 
                   class="form-field">
          </div>

          <div>
            <label class="block text-sm font-semibold text-gray-700 mb-2">
              {{ i18n.t('forms.phone') }}
            </label>
            <input type="tel" formControlName="telephone" 
                   class="form-field"
                   placeholder="+33 1 23 45 67 89">
          </div>

          <div>
            <label class="block text-sm font-semibold text-gray-700 mb-2">
              {{ i18n.t('forms.email') }}
            </label>
            <input type="email" formControlName="email" 
                   class="form-field"
                   placeholder="contact@entreprise.com">
          </div>
        </div>
      </div>

      <!-- Form Actions -->
      <div class="flex items-center justify-between pt-6 border-t">
        <button type="button" 
                routerLink="/cooperant"
                class="px-6 py-3 border-2 border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-all font-semibold">
          {{ i18n.t('forms.cancel') }}
        </button>
        
        <button type="submit" 
                [disabled]="employerForm.invalid || loading"
                class="px-8 py-3 bg-cnss-primary text-white rounded-lg hover:bg-opacity-90 transition-all font-semibold disabled:opacity-50 disabled:cursor-not-allowed flex items-center">
          <span *ngIf="loading" class="spinner-sm mr-2"></span>
          <span class="material-icons mr-2" *ngIf="!loading">save</span>
          {{ i18n.t('forms.save') }}
        </button>
      </div>
    </form>
  </div>
</app-main-layout>
