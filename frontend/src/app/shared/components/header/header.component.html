<header class="bg-white shadow-lg sticky top-0 z-50">
  <div class="container mx-auto px-4 py-4">
    <div class="flex items-center justify-between">
      <!-- Logo & Title -->
      <div class="flex items-center space-x-4">
        <img 
          src="assets/images/logo-cnss.png" 
          alt="CNSS Logo" 
          class="h-16 w-auto object-contain"
        />
        <div class="border-l-2 border-cnss-primary pl-4">
          <h1 class="text-xl font-bold text-cnss-primary">{{ i18n.t('header.republic') }}</h1>
          <p class="text-sm text-cnss-secondary font-semibold">{{ i18n.t('header.cnss') }}</p>
          <p class="text-xs text-gray-600 mt-1">{{ i18n.t('header.system') }}</p>
        </div>
      </div>

      <!-- Navigation & User -->
      <nav class="hidden md:flex items-center space-x-6">
        <a routerLink="/dashboard" class="nav-link">
          <span class="material-icons text-sm mr-1">dashboard</span>
          {{ i18n.t('nav.dashboard') }}
        </a>
        <a routerLink="/cooperant" class="nav-link">
          <span class="material-icons text-sm mr-1">person</span>
          Coop√©rants
        </a>
        <a routerLink="/affiliation" class="nav-link">
          <span class="material-icons text-sm mr-1">person_add</span>
          {{ i18n.t('nav.affiliations') }}
        </a>
        <a routerLink="/debit" class="nav-link">
          <span class="material-icons text-sm mr-1">receipt</span>
          {{ i18n.t('nav.debits') }}
        </a>
        <a routerLink="/payment" class="nav-link">
          <span class="material-icons text-sm mr-1">payment</span>
          {{ i18n.t('nav.payments') }}
        </a>
        
        <div class="relative" *ngIf="user$ | async as user">
          <button (click)="toggleMenu()" class="flex items-center space-x-2 bg-cnss-primary text-white px-4 py-2 rounded-lg hover:bg-opacity-90 transition-all">
            <span class="material-icons">account_circle</span>
            <span>{{ user.username }}</span>
            <span class="material-icons text-sm">expand_more</span>
          </button>
          
          <div *ngIf="isMenuOpen" class="absolute right-0 mt-2 w-56 bg-white rounded-lg shadow-xl py-2 border border-gray-200">
            <a routerLink="/profile" (click)="isMenuOpen = false" class="dropdown-item">
              <span class="material-icons text-sm">person</span>
              {{ i18n.t('nav.profile') }}
            </a>
            <a routerLink="/settings" (click)="isMenuOpen = false" class="dropdown-item">
              <span class="material-icons text-sm">settings</span>
              {{ i18n.t('nav.settings') }}
            </a>
            <!-- Admin Menu -->
            <div *ngIf="user.profil?.toLowerCase() === 'admin'">
              <hr class="my-2">
              <p class="px-4 py-1 text-xs text-gray-500 uppercase font-semibold">Administration</p>
              <a routerLink="/reports" (click)="isMenuOpen = false" class="dropdown-item">
                <span class="material-icons text-sm">description</span>
                Rapports
              </a>
              <a routerLink="/admin/users" (click)="isMenuOpen = false" class="dropdown-item">
                <span class="material-icons text-sm">group</span>
                Gestion Utilisateurs
              </a>
              <a routerLink="/admin/logs" (click)="isMenuOpen = false" class="dropdown-item">
                <span class="material-icons text-sm">history</span>
                Journal d'Audit
              </a>
            </div>
            
            <hr class="my-2">
            <button (click)="logout()" class="dropdown-item text-red-600 w-full text-left">
              <span class="material-icons text-sm">logout</span>
              {{ i18n.t('nav.logout') }}
            </button>
          </div>
        </div>
      </nav>

      <!-- Mobile menu button -->
      <button class="md:hidden" (click)="toggleMenu()">
        <span class="material-icons text-cnss-primary">menu</span>
      </button>
    </div>
  </div>
</header>
